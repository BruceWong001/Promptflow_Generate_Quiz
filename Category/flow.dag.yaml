$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
environment:
  python_requirements_txt: requirements.txt
inputs:
  content:
    type: string
    default: "庆历四年春，滕子京谪守巴陵郡。越明年，政通人和，百废具兴。乃重修岳阳楼，增其旧制，刻唐贤今人诗赋于其上。属予作文以记之。(具 通：俱)
      　　予观夫巴陵胜状，在洞庭一湖。衔远山，吞长江，浩浩汤汤，横无际涯;朝晖夕阴，气象万千。此则岳阳楼之大观也，前人之述备矣。然则北通巫峡，南极潇湘，\
      迁客骚人，多会于此，览物之情，得无异乎?
      　　若夫霪雨霏霏，连月不开，阴风怒号，浊浪排空;日星隐曜，山岳潜形;商旅不行，樯倾楫摧;薄暮冥冥，虎啸猿啼。登斯楼也，则有去国怀乡，忧谗畏讥，满目\
      萧然，感极而悲者矣。
      　　至若春和景明，波澜不惊，上下天光，一碧万顷;沙鸥翔集，锦鳞游泳;岸芷汀兰，郁郁青青。而或长烟一空，皓月千里，浮光跃金，静影沉璧，渔歌互答，此乐\
      何极!登斯楼也，则有心旷神怡，宠辱偕忘，把酒临风，其喜洋洋者矣。        Alas!  Try to seek the heart of
      the ancient human, or the two different, what?  Don't be happy with
      things, don't be sad with yourself;  The high of the temple is worried
      about its people;  Where the lake is far, worry about its king.  Both
      advance and retreat are worrying.  But when will you be happy?  It must be
      said: \"First the world of worry and worry, after the world of joy and
      joy.\"  Booo!  Weiss, who will return with us?   September 15, 2006. "
    description: 传入的生成quiz赌赢的文档内容。
  questionnumber:
    type: int
    default: 5
    description: 预期的考题个数。
  language:
    type: string
    default: JP
outputs:
  answer:
    type: string
    reference: ${chat.output}
  answer_json:
    type: string
    reference: ${format_response.output}
nodes:
- name: chat
  use_variants: true
- name: format_response
  type: python
  source:
    type: code
    path: format_response.py
  inputs:
    llmresponse: ${chat.output}
node_variants:
  chat:
    default_variant_id: variant_2
    variants:
      variant_0:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v1.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.2
            content: ${inputs.content}
            language: ${inputs.language}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
      variant_1:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v2.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.2
            content: ${inputs.content}
            language: ${inputs.language}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
      variant_2:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v3.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.7
            content: ${inputs.content}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
