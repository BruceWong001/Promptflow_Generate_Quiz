$schema: https://azuremlschemas.azureedge.net/promptflow/latest/Flow.schema.json
environment:
  python_requirements_txt: requirements.txt
inputs:
  content:
    type: string
    default: 在过去，一个男人在四十岁时死去，过着充实的生活，这种情况并不少见。但现在我们认为四十年的寿命非常短。人们活到八九十岁并不罕见，有些人甚至活到100岁。更重要的是，人们过着健康长寿的生活，并且活跃到他们的“黄金岁月”。人类的长寿主要归功于科学技术的进步。医学上的突破已经根除许多曾经常见的致命疾病。也许更重要的是，更好的总体健康状况意味着人们首先不太可能感染。更好的健康还有助于人们预防缓慢衰弱的疾病，例如心脏病，这些疾病可能会在很小的时候就夺走他们的生命。随着文明的进步，我们的生活环境和食物来源变得更加卫生。此外，工作现在更安全，对人体没有负担。经过几年的艰苦工作，我们不会疲惫不堪。
    description: 传入的生成quiz赌赢的文档内容。
  questionnumber:
    type: int
    default: 5
    description: 预期的考题个数。
  language:
    type: string
    default: JP
outputs:
  answer:
    type: string
    reference: ${chat.output}
  answer_json:
    type: string
    reference: ${format_response.output}
nodes:
- name: chat
  use_variants: true
- name: format_response
  type: python
  source:
    type: code
    path: format_response.py
  inputs:
    llmresponse: ${chat.output}
node_variants:
  chat:
    default_variant_id: variant_2
    variants:
      variant_0:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v1.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.2
            content: ${inputs.content}
            language: ${inputs.language}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
      variant_1:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v2.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.2
            content: ${inputs.content}
            language: ${inputs.language}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
      variant_2:
        node:
          type: llm
          source:
            type: code
            path: CurriculaAICreateQuizCategories_v3.jinja2
          inputs:
            deployment_name: gpt-35-turbo-16k
            max_tokens: 2000
            temperature: 0.7
            content: ${inputs.content}
            questionnumber: ${inputs.questionnumber}
          connection: azure_oai_gpt35
          api: chat
